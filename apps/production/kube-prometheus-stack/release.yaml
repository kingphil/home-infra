apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: kube-prometheus-stack
  namespace: monitoring
spec:
  values:
    alertmanager:
      enabled: true
      ingress:
        enabled: true
        hosts:
          - kps-alertmanager.pekware.club
        paths:
          - /
        tls:
          - secretName: star.pekware.club
            hosts:
              - kps-alertmanager.pekware.club
    grafana:
      defaultDashboardsTimezone: cdt
      ingress:
        enabled: true
        hosts:
          - kps-grafana.pekware.club
        path: /
        tls:
          - secretName: star.pekware.club
            hosts:
              - kps-grafana.pekware.club
    prometheus:
      ingress:
        enabled: true
        hosts:
          - kps-prometheus.pekware.club
        paths:
          - /
        tls:
          - secretName: star.pekware.club
            hosts:
              - kps-prometheus.pekware.club
      prometheusSpec:
        retention: 24h
        resources:
          requests:
            cpu: 200m
            memory: 200Mi
